@using System.Web.Configuration
@using GrandeTravel.Entity

@{
    ViewBag.Title = "Payment";
    ViewBag.Keywords = "";
    ViewBag.Description = "";
}

@section styles {
    <link href="~/Content/clearcanvas/membership.css" rel="stylesheet" />
}

<div id="membership" class="register">
    <section>
        <section class="row">
            <div class="col-md-12 admin-form">

                <header class="register-header">
                    <div class="header">
                        <h4>Payment</h4>
                    </div>
                </header>

                <section class="row">
                    <div class="col-md-6">
                        @using (Html.BeginForm("CreateTransaction", "Payment",
                                FormMethod.Post, new
                                {
                                    id = "braintree-payment-form",
                                    @class = "form-horizontal",
                                    @role = "form"
                                }))
                        {
                            @Html.AntiForgeryToken()

                            <fieldset>
                                <legend>Create Transaction</legend>

                                @{
                            Package package = (Package)ViewData["Package"];
                                }

                                <input type="hidden" name="packageId" value="@package.PackageId">
                                <input type="hidden" name="packageName" value="@package.Name">
                                <input type="hidden" name="amount" value="@package.Amount">

                                <div class="form-group">
                                    <p>Package : @package.Name</p>
                                    <p>Total Amount : @package.Amount</p>
                                </div>

                                <div class="form-group">
                                    <label class="col-md-2 control-label">Card Number</label>
                                    <div class="col-md-10">
                                        <input type="text" size="20" autocomplete="off" data-encrypted-name="number"
                                               class="form-control" id="number">
                                    </div>
                                </div>

                                <div class="form-group">
                                    <label class="col-md-2 control-label">CVV</label>
                                    <div class="col-md-10">
                                        <input type="text" size="4" autocomplete="off" data-encrypted-name="cvv"
                                               class="form-control" id="cvv">
                                    </div>
                                </div>

                                <div class="form-group">
                                    <label class="col-md-2 control-label">Expiration (MM/YYYY)</label>
                                    <div class="col-md-10">
                                        <input type="text" size="2" autocomplete="off" data-encrypted-name="month"
                                               class="form-control" id="number">

                                        <input type="text" size="4" autocomplete="off" data-encrypted-name="year"
                                               class="form-control" id="number">
                                    </div>
                                </div>

                                <div class="form-group">
                                    <div class="col-sm-offset-2 col-sm-10">
                                        <input type="submit" id="submit" class="btn btn-default" value="SUBMIT" />
                                    </div>
                                </div>
                            </fieldset>
                        }
                    </div>
                </section>

            </div>
        </section>
    </section>
</div>

@section Scripts {
    <script src="https://js.braintreegateway.com/v1/braintree.js"></script>
    <script>
        var braintree = Braintree.create("@WebConfigurationManager.AppSettings["brainTreeClientSideEncryptionKey"]");
        braintree.onSubmitEncryptForm('braintree-payment-form');
    </script>
}
